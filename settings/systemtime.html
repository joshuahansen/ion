<script>
function updateDate()
{
	var radioValue = $("input[name='systemTime']:checked").val();

	if(radioValue.localeCompare("ntp") == 0)
	{	
		//SEND UPDATE FEQUENCY, SERVER IP, TIME ZONE, AND DAYLIGHT SAVINGS
		var NTP = document.getElementById("NTPServer").value;
		var timeZone = document.getElementById("timeZone").value;
		var dayLight = document.getElementById("daylightSavings").value;
		if(timeZone.localeCompare("GMT") == 0)
		{
			timeZone = "0:00";
		}
		else
		{
			timeZone = timeZone.replace("GMT", "");
		}

		
		$.getJSON("/systemTime?NTP=" + NTP + "&timeZone=" + timeZone + "&daylight=" + dayLight);
		return false;
	}
	else if(radioValue.localeCompare("sysTime") == 0)
	{
		//SEND SYSTEM TIME IN UNIX TIMESTAMP
		var date = new Date();
		var unixtime = date.getTime();
		$.getJSON("/systemTime?unix=" + unixtime);
		return false;
	}
	else if(radioValue.localeCompare("manual") == 0)
	{
		//CONVERT MANUAL INPUT TO UNIX TIMESTAMP
		var manDate = new Date(document.getElementById("manualDate").value);
		var day = manDate.getDate();
		var month = manDate.getMonth();
		var year = manDate.getYear();
		var time = document.getElementById("manualTime").value;
		var unixtime = Date.parse("15 Aug, 2017 16:00:35")/1000;
		$.getJSON("/systemTime?unix=" + unixtime);
		return false;
	}
}
</script>
<div class="row">
	<div class="col-2"></div>
	<div class="Settings col-8">
		<h1>System Time</h1>
		</br>
		<div>
			<h4><input type="radio" name="systemTime" id="ntp" value="ntp">Synchronize with NTP server time</h4>
			<hr>
			<label>NTP Server</label>
			<input type="text" class="textbox" id="NTPServer">
			</br>
			</br>
			<label>Time Zone</label>
			<select class="textbox" id="timeZone">
			<script>
				var timezones = ["GMT-12:00", "GMT-11:00", "GMT-10:00", "GMT-9:00", "GMT-8:00", "GMT-7:00", "GMT-6:00", "GMT-5:00",
					"GMT-4:00", "GMT-3:30", "GMT-3:00", "GMT-2:00", "GMT-1:00", "GMT", "GMT+1:00", "GMT+2:00", "GMT+3:00", "GMT+3:30",
					"GMT+4:00", "GMT+5:00", "GMT+6:00", "GMT+7:00", "GMT+8:00", "GMT+9:00", "GMT+10:00", "GMT+11:00", "GMT+12:00", "GMT+13:00"];
				var select = document.getElementById("timeZone");
	
				for(var i = 0; i < timezones.length; i++)
				{
					var opt = document.createElement("option");
					opt.value = timezones[i];
					opt.innerHTML = timezones[i];
					if(timezones[i].localeCompare("GMT") == 0)
					{
						opt.selected = "selected";
					}
					select.appendChild(opt);
				}
			</script>
			</select>
			</br>
			</br>
			<label>Use Daylight Saving Time</label>
			<select class="textbox" id="daylightSavings">
				<option value="NO">NO</option>
				<option value="YES">YES</option>
			</select>
			</br>
			</br>
		</div>
		<div>
			<h4><input type="radio" name="systemTime" id="sysTime" value="sysTime" checked>Synchronize with System Time</h4>
			<hr>
			<label>System Time (hh:mm:ss)</label>
			<input type="text" class="textbox" id="systemTime" style="border:none; width: 75px" readonly>
			</br>
			</br>
			<label>System Date(dd/mm/yyyy)</label>
			<input type="text" class="textbox" id="systemDate" style="border:none; width: 75px" readonly>
		</div>
		<div>
			<h4><input type="radio" name="systemTime" id="manualTime" value="manual">Manually Setting</h4>
			<hr>
			<label>Time (hh:mm:ss)</label>
			<input type="text" class="textbox" id="manualTime">
			</br>
			</br>
			<label>Date(dd/mm/yyyy)</label>
			<input type="text" class="textbox" id="manualDate">
		</div>
		</br>
		<button onclick="return updateDate()" class="updateSetting">Save</button>

	</div>
	<div class="col-2"></div>
</div>
